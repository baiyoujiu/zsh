CFW.pay = { withdrawRecordPageJump: function (a) { "0" == a && $("#withdrawRecord").data("loaded") || $.post(ctx.account + "/myWithdraw.html", { action: "withdrawRecord", page: a, pageSize: 10 }, function (a) { var b = new Text; b._(a); b.toHtml("withdrawRecord"); $("#withdrawRecord").data("loaded", !0) }, "text") }, loadSubBank: function (a, d, b, e) { $.post(ctx.account + "/bankCard.htm", { action: "subBank", bankName: a, province: d, city: b }, function (d) { $("#" + e).children().remove(); if (d && $.isArray(d.banks) && 0 < d.banks.length) for (var b = new Text, f = 0; f < d.banks.length; f++) { var c = $.trim(d.banks[f]); "\u6d66\u53d1\u94f6\u884c" == a ? (c = $.replace(c, "\u4e0a\u6d77\u6d66\u53d1\u53d1\u5c55\u94f6\u884c\u80a1\u4efd\u6709\u9650\u516c\u53f8", ""), c = $.replace(c, "\u4e0a\u6d77\u6d66\u4e1c\u53d1\u5c55\u94f6\u884c\u80a1\u4efd\u6709\u9650\u516c\u53f8", ""), c = $.replace(c, "\u4e0a\u6d77\u6d66\u4e1c\u53d1\u5c55\u94f6\u884c", ""), c = $.replace(c, "\u4e0a\u6d77\u6d66\u53d1\u53d1\u5c55\u94f6\u884c", "")) : (c = $.replace(c, "\u4e2d\u56fd" + a + "\u94f6\u884c\u6709\u9650\u8d23\u4efb\u516c\u53f8", ""), c = $.replace(c, a + "\u94f6\u884c\u6709\u9650\u8d23\u4efb\u516c\u53f8", ""), c = $.replace(c, "\u4e2d\u56fd" + a + "\u80a1\u4efd\u6709\u9650\u516c\u53f8", ""), c = $.replace(c, a + "\u80a1\u4efd\u6709\u9650\u516c\u53f8", ""), c = $.replace(c, "\u4e2d\u56fd" + a + "\u94f6\u884c", ""), c = $.replace(c, "\u4e2d\u56fd" + a, ""), c = $.replace(c, a + "\u94f6\u884c", ""), c = $.replace(c, a, "")); b._('\x3coption value\x3d"')._(c)._('"\x3e')._(c)._("\x3c/option\x3e") } else b = new Text; b._("\x3coption value\x3d'\u5176\u4ed6\u652f\u884c'\x3e\u5176\u4ed6\u652f\u884c\x3c/option\x3e"); $("#" + e).html(b.ts()) }, "json") }, bindBankCard: function (a) { if ($.isEmptyObject(a)) CFW.dualog.alert("\u7ed1\u5b9a\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a", 1); else { if ("" == $.trim(a.bankCard)) return CFW.dialog.alert("\u94f6\u884c\u5361\u53f7\u4e0d\u80fd\u4e3a\u7a7a", 1), !1; if ("" == $.trim(a.reBankCard)) return CFW.dialog.alert("\u786e\u8ba4\u5361\u53f7\u4e0d\u80fd\u4e3a\u7a7a", 1), !1; if (a.bankCard != a.reBankCard) return CFW.dialog.alert("\u786e\u8ba4\u5361\u53f7\u4e0e\u94f6\u884c\u5361\u53f7\u4e0d\u4e00\u81f4", 1), !1; if (!CFW.valid.isBankCard(a.bankCard)) return CFW.dialog.alert("\u94f6\u884c\u5361\u53f7\u683c\u5f0f\u9519\u8bef", 1), !1; a.action = "bindCard"; CFW.form.disableBtn("cardBtn"); CFW.ajax(ctx.account + "/bankCard.htm", a, function (a) { CFW.form.enableBtn("cardBtn"); a = $.parseJSON(a); a.success ? CFW.dialog.alert("\u94f6\u884c\u5361\u7ed1\u5b9a\u6210\u529f", 4, { listener: function () { window.location.href = ctx.account + "/myWithdraw.html?tab\x3dbankCardTab" } }) : CFW.dialog.alert(a.resultMsg, 3) }) } }, withdraw: function (a, d, b) { if ("" == d) return CFW.dialog.alert("\u8bf7\u8f93\u5165\u63d0\u6b3e\u91d1\u989d", 1, { listener: function () { $("#money").focus() } }), !1; if (!CFW.valid.isMoney(d)) return CFW.dialog.alert("\u63d0\u6b3e\u91d1\u989d\u586b\u5199\u9519\u8bef", 1, { listener: function () { $("#money").focus() } }), !1; if (CFW.user.account.balance < parseFloat(d)) return CFW.dialog.alert("\u63d0\u6b3e\u91d1\u989d\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e\u5e10\u6237\u4f59\u989d", 1, { listener: function () { $("#money").focus() } }), !1; if (10 > parseFloat(d)) return CFW.dialog.alert("\u63d0\u6b3e\u91d1\u989d\u6700\u5c0f10\u5143", 1, { listener: function () { $("#money").focus() } }), !1; if (!a || "" == $.trim(a)) return CFW.dialog.alert("\u8bf7\u9009\u62e9\u63d0\u6b3e\u94f6\u884c\u5361", 1, { listener: function () { $("#cardId").focus() } }), !1; if ("" == $.trim(b)) return CFW.dialog.alert("\u8bf7\u8f93\u5165\u63d0\u6b3e\u5bc6\u7801", 1, { listener: function () { $("#password").focus() } }), !1; CFW.dialog.confirm("\u60a8\u786e\u5b9a\u8981\u7533\u8bf7\u63d0\u6b3e\u5417", 2, { listener: function (e) { 1 == e && (CFW.form.disableBtn("withdrawBtn"), CFW.ajax(ctx.account + "/myWithdraw.html", { action: "withdraw", cardId: a, money: d, password: b }, function (a) { CFW.form.enableBtn("withdrawBtn"); a = $.parseJSON(a); a.success ? CFW.dialog.alert("\u63d0\u6b3e\u7533\u8bf7\u6210\u529f", 4, { listener: function () { window.location.href = ctx.account + "/myWithdraw.html?tab\x3drecordTab" } }) : CFW.dialog.alert(a.resultMsg, 3) })) } }) }, cancelWithdraw: function (a, d) { CFW.dialog.confirm("\u60a8\u786e\u5b9a\u8981\u7533\u8bf7\u63d0\u6b3e\u5417", 2, { listener: function (b) { 1 == b && CFW.ajax(ctx.account + "/myWithdraw.html", { action: "cancelWithdraw", id: a }, function (a) { a = $.parseJSON(a); a.success ? CFW.dialog.alert("\u63d0\u6b3e\u53d6\u6d88\u6210\u529f", 4, { listener: function () { d && d() } }) : CFW.dialog.alert(a.resultMsg, 3) }) } }) }, setDefaultCard: function (a) { CFW.ajax(ctx.account + "/bankCard.htm", { action: "setDefaultCard", cardId: a }, function (a) { a = $.parseJSON(a); a.success ? CFW.dialog.alert("\u9ed8\u8ba4\u94f6\u884c\u5361\u8bbe\u7f6e\u6210\u529f", 4, { listener: function () { window.location.href = window.location.href = ctx.account + "/myWithdraw.html?tab\x3dbankCardTab" } }) : CFW.dialog.alert(a.resultMsg, 3) }) }, deleteCard: function (a) { CFW.dialog.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u94f6\u884c\u5361\u5417", 2, { listener: function (d) { 1 == d && CFW.ajax(ctx.account + "/bankCard.htm", { action: "deleteCard", cardId: a }, function (a) { a = $.parseJSON(a); a.success ? CFW.dialog.alert("\u94f6\u884c\u5361\u5220\u9664\u6210\u529f", 4, { listener: function () { window.location.href = window.location.href = ctx.account + "/myWithdraw.html?tab\x3dbankCardTab" } }) : CFW.dialog.alert(a.resultMsg, 3) }) } }) }, showCharge: function (a, d, b) { var e = function (e) { 1 == e && (window.open(ctx.account + "/myRecharge.html" + (b && b.shortage ? "?money\x3d" + b.shortage : "")), CFW.dialog.close(), CFW.dialog.confirm("\u5145\u503c\u662f\u5426\u6210\u529f", 2, { btn: "\u5145\u503c\u5931\u8d25", btnr: "\u5145\u503c\u6210\u529f", listener: function (b) { if (1 == b) CFW.user.loadBalance(function (b) { a && a(b.balance) }); else if (0 == b) { d && d(); return } CFW.dialog.close() } })) }; CFW.dialog.confirm(b && 0 < $.trim(b.title).length ? $.trim(b.title) : "\u60a8\u7684\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\uff0c\u8bf7\u5148\u5145\u503c", 2, { btn: "\u6682\u4e0d\u5145\u503c", btnr: "\u7acb\u5373\u5145\u503c", listener: e }); b && b.direct && e(1) }, showChargeResultConfirm: function (a, d) { CFW.dialog.confirm("\u5145\u503c\u662f\u5426\u6210\u529f", 2, { btn: "\u5145\u503c\u5931\u8d25", btnr: "\u5145\u503c\u6210\u529f", listener: function (b) { if (1 == b) CFW.user.loadBalance(function (b) { a && a(b.balance) }); else if (0 == b) { d && d(); return } CFW.dialog.close() } }) } };